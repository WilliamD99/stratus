---
import siteData from "@/config/siteData.json";
import { SEO } from "astro-seo";

interface BaseProps {
  title: string;
  description: string;
  noindex?: boolean;
}

interface GenProps extends BaseProps {
  type: "general";
  image?: any;
}

const { title, description, noindex = false } = Astro.props as GenProps;

// const canonicalUrl = new URL(Astro.url.pathname, Astro.site);

function trimEndSlash(str: string) {
  if (str[str.length - 1] === "/") {
    return str.slice(0, -1);
  } else {
    return str;
  }
}

// put together the image URL
const imageUrl =
  trimEndSlash(Astro.site?.toString() || "") + siteData.defaultImage.src;
---

<!-- canonical={canonicalUrl.toString()} --><!-- url: canonicalUrl.toString(), -->
<SEO
  title={siteData.title}
  description={siteData.description}
  noindex={noindex}
  nofollow={noindex}
/>
